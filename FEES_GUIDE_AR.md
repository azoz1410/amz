# ูุธุงู ุงูุฑุณูู ูุงูุนูููุงุช - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ุงููุธุงู ููุฏุนู ุฑุณูู ุฃูุงุฒูู ุงููุฎุชููุฉ ููู ููุชุฌ:

- **ุนูููุฉ ุฃูุงุฒูู** (ูุณุจุฉ ูุฆููุฉ ูู ุณุนุฑ ุงูุจูุน)
- **ุฑุณูู ุงูุดุญู ูุงูุชุบููู** (ูุจูุบ ุซุงุจุช)
- **ุฑุณูู ุงูุชุฎุฒูู** (ูุจูุบ ุซุงุจุช)

---

## ๐ฏ ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### 1. **ุฑุณูู ุงูุชุฑุงุถูุฉ ุนูู ูุณุชูู ุงูููุชุฌ**

- ูููู ุชุญุฏูุฏ ุฑุณูู ุงูุชุฑุงุถูุฉ ููู ููุชุฌ
- ุชุณุชุฎุฏู ูุฐู ุงูุฑุณูู ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุงูููุงุชูุฑ
- ูููู ุชุนุฏูู ุงูุฑุณูู ูุฏููุงู ููู ูุงุชูุฑุฉ

### 2. **ุญุณุงุจ ุตุงูู ุงูุฑุจุญ ุชููุงุฆูุงู**

```
ุงูุฑุจุญ ุงูุฅุฌูุงูู = (ุณุนุฑ ุงูุจูุน - ุณุนุฑ ุงูุดุฑุงุก) ร ุงููููุฉ
ุฅุฌูุงูู ุงูุฑุณูู = ุนูููุฉ ุฃูุงุฒูู + ุฑุณูู ุงูุดุญู + ุฑุณูู ุงูุชุฎุฒูู
ุตุงูู ุงูุฑุจุญ = ุงูุฑุจุญ ุงูุฅุฌูุงูู - ุฅุฌูุงูู ุงูุฑุณูู
```

### 3. **ุชูุงุฑูุฑ ุดุงููุฉ**

- ุนุฑุถ ุฅุฌูุงูู ุงูุฑุณูู ูู ููุญุฉ ุงูุชุญูู
- ุชุญููู ุตุงูู ุงูุฑุจุญ ุจุนุฏ ุงูุฑุณูู
- ููุงุฑูุฉ ุงูุฑุจุญ ูุจู ูุจุนุฏ ุงูุฑุณูู

---

## ๐ง ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุงูุชุญ phpMyAdmin ููู ุจุชูููุฐ ููู `update_fees_system.sql`:

```bash
http://localhost/phpmyadmin
```

ุฃู ุนุจุฑ ุณุทุฑ ุงูุฃูุงูุฑ:

```bash
mysql -u root -p amz_inventory < update_fees_system.sql
```

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุชุญุฏูุซ

ุงูุชุญ ูู ุงููุชุตูุญ:

```
http://localhost/AMZ/test_fees.php
```

---

## ๐ ุงูุญููู ุงูุฌุฏูุฏุฉ

### ุฌุฏูู ุงูููุชุฌุงุช (`products`)

| ุงูุญูู                  | ุงูููุน         | ุงููุตู                   | ูุซุงู             |
| ---------------------- | ------------- | ----------------------- | ---------------- |
| `amazon_fee_percent`   | DECIMAL(5,2)  | ูุณุจุฉ ุนูููุฉ ุฃูุงุฒูู       | 15.00 (ูุนูู 15%) |
| `default_shipping_fee` | DECIMAL(10,2) | ุฑุณูู ุงูุดุญู ุงูุงูุชุฑุงุถูุฉ   | 10.00 ุฑ.ุณ        |
| `default_storage_fee`  | DECIMAL(10,2) | ุฑุณูู ุงูุชุฎุฒูู ุงูุงูุชุฑุงุถูุฉ | 5.00 ุฑ.ุณ         |

### ุฌุฏูู ุชูุงุตูู ุงูููุงุชูุฑ (`invoice_items`)

| ุงูุญูู          | ุงูููุน         | ุงููุตู                |
| -------------- | ------------- | -------------------- |
| `amazon_fee`   | DECIMAL(10,2) | ุนูููุฉ ุฃูุงุฒูู ุงููุนููุฉ |
| `shipping_fee` | DECIMAL(10,2) | ุฑุณูู ุงูุดุญู ุงููุนููุฉ   |
| `storage_fee`  | DECIMAL(10,2) | ุฑุณูู ุงูุชุฎุฒูู ุงููุนููุฉ |
| `total_fees`   | DECIMAL(10,2) | ุฅุฌูุงูู ุงูุฑุณูู        |
| `net_profit`   | DECIMAL(10,2) | ุตุงูู ุงูุฑุจุญ           |

### ุฌุฏูู ุงูููุงุชูุฑ (`invoices`)

| ุงูุญูู        | ุงูููุน         | ุงููุตู                |
| ------------ | ------------- | -------------------- |
| `total_fees` | DECIMAL(10,2) | ุฅุฌูุงูู ุฑุณูู ุงููุงุชูุฑุฉ |
| `net_profit` | DECIMAL(10,2) | ุตุงูู ุฑุจุญ ุงููุงุชูุฑุฉ    |

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅุถุงูุฉ ููุชุฌ ูุน ุฑุณูู

#### ุนุจุฑ API:

```bash
POST http://localhost/AMZ/backend/api/products.php
Content-Type: application/json
```

```json
{
  "name": "ูุงุชู ุฐูู",
  "sku": "PHONE-001",
  "description": "ูุงุชู ุฐูู ุญุฏูุซ",
  "purchase_price": 1000.0,
  "selling_price": 1800.0,
  "amazon_fee_percent": 15.0,
  "default_shipping_fee": 25.0,
  "default_storage_fee": 10.0,
  "stock_quantity": 50,
  "min_stock_level": 5
}
```

#### ุงูุญุณุงุจ:

- ุณุนุฑ ุงูุจูุน: **1800 ุฑ.ุณ**
- ุณุนุฑ ุงูุดุฑุงุก: **1000 ุฑ.ุณ**
- ุงูุฑุจุญ ุงูุฅุฌูุงูู: **800 ุฑ.ุณ**
- ุนูููุฉ ุฃูุงุฒูู (15%): **270 ุฑ.ุณ**
- ุฑุณูู ุงูุดุญู: **25 ุฑ.ุณ**
- ุฑุณูู ุงูุชุฎุฒูู: **10 ุฑ.ุณ**
- **ุฅุฌูุงูู ุงูุฑุณูู: 305 ุฑ.ุณ**
- **ุตุงูู ุงูุฑุจุญ: 495 ุฑ.ุณ**

---

### 2. ุฅูุดุงุก ูุงุชูุฑุฉ

#### ุนุจุฑ API:

```bash
POST http://localhost/AMZ/backend/api/invoices.php
Content-Type: application/json
```

```json
{
  "customer_name": "ุฃุญูุฏ ูุญูุฏ",
  "customer_email": "ahmad@example.com",
  "customer_phone": "0501234567",
  "customer_address": "ุงูุฑูุงุถ",
  "discount": 0,
  "tax": 0,
  "items": [
    {
      "product_id": 1,
      "product_name": "ูุงุชู ุฐูู",
      "quantity": 2,
      "unit_price": 1800.0,
      "purchase_price": 1000.0,
      "subtotal": 3600.0
    }
  ]
}
```

**ููุงุญุธุฉ:** ุงูุฑุณูู ุณุชุญุณุจ ุชููุงุฆูุงู ูู ุจูุงูุงุช ุงูููุชุฌ.

#### ูุชุฎุตูุต ุงูุฑุณูู ูุฏููุงู:

```json
{
  "customer_name": "ุฃุญูุฏ ูุญูุฏ",
  "items": [
    {
      "product_id": 1,
      "quantity": 2,
      "unit_price": 1800.0,
      "purchase_price": 1000.0,
      "subtotal": 3600.0,
      "amazon_fee": 500.0,
      "shipping_fee": 40.0,
      "storage_fee": 20.0
    }
  ]
}
```

---

### 3. ุนุฑุถ ุงูุชูุงุฑูุฑ

#### ุฅุญุตุงุฆูุงุช ููุญุฉ ุงูุชุญูู:

```bash
GET http://localhost/AMZ/backend/api/reports.php?type=dashboard
```

**ุงูุงุณุชุฌุงุจุฉ:**

```json
{
  "total_sales": 50000.0,
  "total_profit": 20000.0,
  "total_fees": 6000.0,
  "net_profit": 14000.0,
  "total_invoices": 25,
  "total_products": 15
}
```

#### ุชูุฑูุฑ ุงูุฃุฑุจุงุญ:

```bash
GET http://localhost/AMZ/backend/api/reports.php?type=profit&start_date=2024-01-01&end_date=2024-12-31
```

**ุงูุงุณุชุฌุงุจุฉ:**

```json
{
  "total_sales": 100000.0,
  "total_profit": 40000.0,
  "total_fees": 12000.0,
  "net_profit": 28000.0,
  "total_invoices": 50,
  "avg_profit": 800.0,
  "avg_net_profit": 560.0
}
```

---

## ๐ ุชุญููู ุงูุฃุฑุจุงุญ

### ูุซุงู ูุงูุนู:

ูููุชุฑุถ ุจูุน ููุชุฌ ุจุงูุจูุงูุงุช ุงูุชุงููุฉ:

- ุณุนุฑ ุงูุจูุน: **2000 ุฑ.ุณ**
- ุณุนุฑ ุงูุดุฑุงุก: **1200 ุฑ.ุณ**
- ุงููููุฉ: **3 ูุญุฏุงุช**

#### ุงูุญุณุงุจุงุช:

| ุงูุจูุฏ              | ุงูุญุณุงุจ          | ุงููุชูุฌุฉ      |
| ------------------ | --------------- | ------------ |
| ุงูุฅูุฑุงุฏุงุช          | 2000 ร 3        | **6000 ุฑ.ุณ** |
| ุงูุชูููุฉ            | 1200 ร 3        | **3600 ุฑ.ุณ** |
| ุงูุฑุจุญ ุงูุฅุฌูุงูู     | 6000 - 3600     | **2400 ุฑ.ุณ** |
| ุนูููุฉ ุฃูุงุฒูู (15%) | 2000 ร 0.15 ร 3 | **900 ุฑ.ุณ**  |
| ุฑุณูู ุงูุดุญู         | 25 ร 3          | **75 ุฑ.ุณ**   |
| ุฑุณูู ุงูุชุฎุฒูู       | 10 ร 3          | **30 ุฑ.ุณ**   |
| **ุฅุฌูุงูู ุงูุฑุณูู**  | 900 + 75 + 30   | **1005 ุฑ.ุณ** |
| **ุตุงูู ุงูุฑุจุญ**     | 2400 - 1005     | **1395 ุฑ.ุณ** |

**ุงูุชุญููู:**

- ูุณุจุฉ ุงูุฑุจุญ ุงูุฅุฌูุงูู: **40%** (2400 / 6000)
- ูุณุจุฉ ุงูุฑุณูู ูู ุงูุฑุจุญ: **41.9%** (1005 / 2400)
- ูุณุจุฉ ุตุงูู ุงูุฑุจุญ: **23.25%** (1395 / 6000)

---

## ๐ ูุตุงุฆุญ ูุฃูุถู ุงูููุงุฑุณุงุช

### 1. ุชุญุฏูุฏ ุงูุฑุณูู ุจุฏูุฉ

- ุงุญุณุจ ุนูููุฉ ุฃูุงุฒูู ุจูุงุกู ุนูู ูุฆุฉ ุงูููุชุฌ
- ุถุน ูู ุงูุงุนุชุจุงุฑ ุชูุงููู ุงูุดุญู ุงููุนููุฉ
- ูู ุจูุฑุงุฌุนุฉ ุฑุณูู ุงูุชุฎุฒูู ุฏูุฑูุงู

### 2. ูุฑุงูุจุฉ ุงูุฃุฑุจุงุญ

- ุฑุงูุจ ูุณุจุฉ ุงูุฑุณูู ุฅูู ุงูุฑุจุญ ุงูุฅุฌูุงูู
- ูุงุฑู ุตุงูู ุงูุฑุจุญ ุจูู ุงูููุชุฌุงุช ุงููุฎุชููุฉ
- ุญุฏุฏ ุงูููุชุฌุงุช ุงูุฃูุซุฑ ุฑุจุญูุฉ ุจุนุฏ ุงูุฑุณูู

### 3. ุชุญุณูู ุงูุฃุณุนุงุฑ

```
ุงูุณุนุฑ ุงููุทููุจ = ุงูุชูููุฉ + ุงูุฑุจุญ ุงููุทููุจ + ุงูุฑุณูู ุงููุชููุนุฉ
```

ูุซุงู:

- ุงูุชูููุฉ: 1000 ุฑ.ุณ
- ุงูุฑุจุญ ุงููุทููุจ: 500 ุฑ.ุณ
- ุงูุฑุณูู ุงููุชููุนุฉ (25%): 375 ุฑ.ุณ
- **ุงูุณุนุฑ ุงููุทููุจ: 1875 ุฑ.ุณ**

### 4. ุชูุงุฑูุฑ ุฏูุฑูุฉ

- ุฑุงุฌุน ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ ุดูุฑูุงู
- ูุงุฑู ุงูุฃุฏุงุก ุจูู ุงูุดููุฑ
- ุญุฏุฏ ุงูุงุชุฌุงูุงุช ูุงูุฃููุงุท

---

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฑุณูู ูุง ุชุธูุฑ ูู ุงูููุงุชูุฑ

**ุงูุญู:**

1. ุชุฃูุฏ ูู ุชุดุบูู ููู `update_fees_system.sql`
2. ุชุญูู ูู ุฅุถุงูุฉ ุงูุฑุณูู ุงูุงูุชุฑุงุถูุฉ ููููุชุฌุงุช
3. ุงูุญุต console ุงููุชุตูุญ ููุฃุฎุทุงุก

### ุงููุดููุฉ: ุตุงูู ุงูุฑุจุญ ุณุงูุจ

**ุงูุญู:**

- ุฑุงุฌุน ุฃุณุนุงุฑ ุงูุจูุน ูุงูุดุฑุงุก
- ุชุญูู ูู ูุณุจุฉ ุงูุนูููุฉ
- ูุฏ ุชุญุชุงุฌ ูุฒูุงุฏุฉ ุงูุณุนุฑ ุฃู ุชูููู ุงูุฑุณูู

### ุงููุดููุฉ: ุงูุฑุณูู ูุง ุชุญุณุจ ุจุดูู ุตุญูุญ

**ุงูุญู:**

```php
// ุชุญูู ูู ุจูุงูุงุช ุงูููุชุฌ
$product = $productClass->getProduct($product_id);
echo "ุนูููุฉ ุฃูุงุฒูู: " . $product['amazon_fee_percent'] . "%\n";
echo "ุฑุณูู ุงูุดุญู: " . $product['default_shipping_fee'] . " ุฑ.ุณ\n";
```

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุงููููุงุช ุงููููุฉ:

- `update_fees_system.sql` - ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `test_fees.php` - ุงุฎุชุจุงุฑ ุงููุธุงู
- `backend/classes/Product.php` - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
- `backend/classes/Invoice.php` - ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
- `backend/classes/Reports.php` - ุงูุชูุงุฑูุฑ

### ุฑูุงุจุท ูููุฏุฉ:

- Dashboard: `http://localhost/AMZ/frontend/pages/index.html`
- Test Page: `http://localhost/AMZ/test_fees.php`
- API Docs: ุฑุงุฌุน `README_NEW.md`

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงูุงุณุชุฎุฏุงูุ ุชุฃูุฏ ูู:

- [ ] ุชู ุชุดุบูู `update_fees_system.sql`
- [ ] ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุนุจุฑ `test_fees.php`
- [ ] ุชู ุฅุถุงูุฉ ุฑุณูู ุงูุชุฑุงุถูุฉ ููููุชุฌุงุช ุงูููุฌูุฏุฉ
- [ ] ุชุนูู API endpoints ุจุดูู ุตุญูุญ
- [ ] ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ

---

**ุชู ุงูุชุญุฏูุซ:** ููููุจุฑ 2024  
**ุงูุฅุตุฏุงุฑ:** 2.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
