# نظام إدارة المخزون والفواتير - Amazon Store

نظام متكامل لإدارة المخزون وإصدار الفواتير مع حساب الأرباح التلقائي وخصم المنتجات من المخزون.

## المميزات

### 1. إدارة المخزون

- إضافة وتعديل وحذف المنتجات
- تتبع كميات المخزون
- تنبيهات للمنتجات قليلة المخزون
- حساب هامش الربح لكل منتج
- تسجيل حركات المخزون (إضافة/خصم/تعديل)

### 2. إصدار الفواتير

- إنشاء فواتير احترافية للعملاء
- خصم تلقائي من المخزون عند البيع
- حساب الأرباح تلقائياً
- إضافة خصومات وضرائب
- طباعة الفواتير
- حفظ معلومات العملاء

### 3. التقارير والإحصائيات

- تقارير المبيعات اليومية
- حساب صافي الأرباح
- أفضل المنتجات مبيعاً
- متوسط قيمة الفاتورة
- نسبة الربح الإجمالية
- تقارير حسب فترة زمنية محددة

## متطلبات التشغيل

- XAMPP (أو أي خادم يدعم PHP و MySQL)
- PHP 7.4 أو أحدث
- MySQL 5.7 أو أحدث
- متصفح ويب حديث

## خطوات التثبيت

### 1. إعداد قاعدة البيانات

1. افتح phpMyAdmin من خلال: `http://localhost/phpmyadmin`
2. أنشئ قاعدة بيانات جديدة باسم `amz_inventory`
3. استورد ملف `database.sql` الموجود في المجلد الرئيسي
4. **هام:** بعد ذلك، استورد ملف `update_database.sql` لإضافة جدول الإعدادات

أو يمكنك تنفيذ الأوامر التالية مباشرة:

```sql
-- افتح phpMyAdmin وقم بتنفيذ محتوى ملف database.sql
-- ثم قم بتنفيذ محتوى ملف update_database.sql
```

### 2. تشغيل النظام

1. تأكد من تشغيل XAMPP (Apache و MySQL)
2. افتح المتصفح وانتقل إلى: `http://localhost/AMZ/`
3. ستظهر لك لوحة التحكم الرئيسية

## هيكل الملفات

```
AMZ/
├── config.php              # إعدادات قاعدة البيانات والدوال المساعدة
├── database.sql            # ملف قاعدة البيانات الأساسي
├── update_database.sql     # تحديثات قاعدة البيانات (جدول الإعدادات)
├── index.php               # الصفحة الرئيسية ولوحة التحكم
├── products.php            # إدارة المخزون والمنتجات
├── create_invoice.php      # إنشاء فاتورة جديدة
├── edit_invoice.php        # تعديل فاتورة موجودة
├── invoice_view.php        # عرض وطباعة الفاتورة
├── invoices.php            # عرض جميع الفواتير
├── reports.php             # التقارير والإحصائيات
├── settings.php            # إعدادات المتجر
└── README.md              # هذا الملف
```

## استخدام النظام

### إضافة منتج جديد

1. انتقل إلى صفحة "المخزون"
2. اضغط على "إضافة منتج جديد"
3. املأ البيانات المطلوبة:
   - اسم المنتج
   - رمز المنتج (SKU)
   - سعر الشراء
   - سعر البيع
   - الكمية في المخزون
4. اضغط "حفظ"

### إصدار فاتورة

1. انتقل إلى "فاتورة جديدة"
2. أدخل معلومات العميل
3. اختر المنتجات والكميات
4. أضف خصومات أو ضرائب إن وجدت
5. اضغط "إصدار الفاتورة"
6. سيتم خصم الكميات تلقائياً من المخزون
7. يمكنك طباعة الفاتورة مباشرة

### تعديل أو حذف فاتورة

1. انتقل إلى صفحة "الفواتير"
2. اضغط على زر "تعديل" (أيقونة القلم) لتعديل الفاتورة
3. أو اضغط على زر "حذف" (أيقونة السلة) لحذف الفاتورة
4. **ملاحظة:** عند حذف فاتورة، يتم إرجاع جميع المنتجات للمخزون تلقائياً

### تخصيص إعدادات المتجر

1. انتقل إلى صفحة "الإعدادات"
2. قم بتعديل:
   - اسم المتجر (عربي وإنجليزي)
   - معلومات الاتصال
   - العملة المستخدمة
   - نسبة الضريبة
   - نص ختام الفاتورة
3. اضغط "حفظ الإعدادات"

### عرض التقارير

1. انتقل إلى صفحة "التقارير"
2. حدد الفترة الزمنية المطلوبة
3. اضغط "عرض التقرير"
4. ستظهر لك:
   - إجمالي المبيعات والأرباح
   - عدد الفواتير والقطع المباعة
   - أفضل المنتجات مبيعاً
   - المبيعات اليومية
   - المنتجات منخفضة المخزون

## قاعدة البيانات

### جدول المنتجات (products)

- معلومات المنتج الأساسية
- أسعار الشراء والبيع
- كمية المخزون
- الحد الأدنى للمخزون

### جدول الفواتير (invoices)

- معلومات العميل
- إجمالي الفاتورة
- الأرباح المحققة
- حالة الفاتورة

### جدول تفاصيل الفواتير (invoice_items)

- المنتجات في كل فاتورة
- الكميات والأسعار
- الأرباح لكل منتج

### جدول حركة المخزون (stock_movements)

- تسجيل جميع حركات المخزون
- الإضافات والخصومات
- المرجعية (فاتورة، شراء، تعديل)

## الأمان

- جميع المدخلات يتم تنظيفها باستخدام `mysqli_real_escape_string`
- استخدام `htmlspecialchars` لمنع XSS
- استخدام Prepared Statements موصى به للإصدارات المستقبلية

## الدعم والتطوير

للمساعدة أو الاستفسارات:

- يمكنك تعديل ملف `config.php` لتغيير إعدادات قاعدة البيانات
- جميع الملفات مكتوبة بلغة PHP ويمكن تخصيصها حسب احتياجاتك

## الترخيص

هذا المشروع مفتوح المصدر ويمكن استخدامه وتعديله بحرية.

---

تم التطوير بواسطة GitHub Copilot
© 2025 Amazon Store Management System
